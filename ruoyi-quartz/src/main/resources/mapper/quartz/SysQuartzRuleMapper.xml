<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper
PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
"http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.ruoyi.quartz.mapper.SysQuartzRuleMapper">
    
    <resultMap type="SysQuartzRule" id="SysQuartzRuleResult">
        <result property="ruleId"    column="ruleId"    />
        <result property="ruleName"    column="ruleName"    />
        <result property="inDormStart"    column="inDormStart"    />
        <result property="inDormEnd"    column="inDormEnd"    />
        <result property="laterTime"    column="laterTime"    />
        <result property="period"    column="period"    />
        <result property="ruleUsers"    column="ruleUsers"    />
    </resultMap>

    <sql id="selectSysQuartzRuleVo">
        select ruleId, ruleName, inDormStart, inDormEnd, laterTime, period, ruleUsers from sys_rule
    </sql>

    <select id="selectSysQuartzRuleList" parameterType="SysQuartzRule" resultMap="SysQuartzRuleResult">
        <include refid="selectSysQuartzRuleVo"/>
        <where>  
            <if test="ruleName != null  and ruleName != ''"> and ruleName like concat('%', #{ruleName}, '%')</if>
            <if test="inDormStart != null  and inDormStart != ''"> and inDormStart = #{inDormStart}</if>
            <if test="inDormEnd != null  and inDormEnd != ''"> and inDormEnd = #{inDormEnd}</if>
            <if test="laterTime != null  and laterTime != ''"> and laterTime = #{laterTime}</if>
            <if test="period != null  and period != ''"> and period = #{period}</if>
            <if test="ruleUsers != null  and ruleUsers != ''"> and ruleUsers = #{ruleUsers}</if>
        </where>
    </select>
    
    <select id="selectSysQuartzRuleById" parameterType="String" resultMap="SysQuartzRuleResult">
        <include refid="selectSysQuartzRuleVo"/>
        where ruleId = #{ruleId}
    </select>
        
    <insert id="insertSysQuartzRule" parameterType="SysQuartzRule">
        insert into sys_rule
        <trim prefix="(" suffix=")" suffixOverrides=",">
            <if test="ruleId != null">ruleId,</if>
            <if test="ruleName != null">ruleName,</if>
            <if test="inDormStart != null">inDormStart,</if>
            <if test="inDormEnd != null">inDormEnd,</if>
            <if test="laterTime != null">laterTime,</if>
            <if test="period != null">period,</if>
            <if test="ruleUsers != null">ruleUsers,</if>
         </trim>
        <trim prefix="values (" suffix=")" suffixOverrides=",">
            <if test="ruleId != null">#{ruleId},</if>
            <if test="ruleName != null">#{ruleName},</if>
            <if test="inDormStart != null">#{inDormStart},</if>
            <if test="inDormEnd != null">#{inDormEnd},</if>
            <if test="laterTime != null">#{laterTime},</if>
            <if test="period != null">#{period},</if>
            <if test="ruleUsers != null">#{ruleUsers},</if>
         </trim>
    </insert>

    <update id="updateSysQuartzRule" parameterType="SysQuartzRule">
        update sys_rule
        <trim prefix="SET" suffixOverrides=",">
            <if test="ruleName != null">ruleName = #{ruleName},</if>
            <if test="inDormStart != null">inDormStart = #{inDormStart},</if>
            <if test="inDormEnd != null">inDormEnd = #{inDormEnd},</if>
            <if test="laterTime != null">laterTime = #{laterTime},</if>
            <if test="period != null">period = #{period},</if>
            <if test="ruleUsers != null">ruleUsers = #{ruleUsers},</if>
        </trim>
        where ruleId = #{ruleId}
    </update>

    <delete id="deleteSysQuartzRuleById" parameterType="String">
        delete from sys_rule where ruleId = #{ruleId}
    </delete>

    <delete id="deleteSysQuartzRuleByIds" parameterType="String">
        delete from sys_rule where ruleId in 
        <foreach item="ruleId" collection="array" open="(" separator="," close=")">
            #{ruleId}
        </foreach>
    </delete>

</mapper>